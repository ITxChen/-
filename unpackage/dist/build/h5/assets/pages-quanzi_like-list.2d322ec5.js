import{D as e,ag as a,z as o,o as t,c as i,w as l,i as s,f as r,a as n,t as d,g as u,h as c,F as m,d as f,r as _,l as p}from"./index-071c8e17.js";import{_ as b,a as h}from"./uni-list.2fc3efd0.js";import{r as k}from"./uni-app.es.af5b3bc2.js";import{_ as g}from"./uni-load-more.3f66e2bf.js";import{_ as C}from"./unicloud-db.4743e108.js";import{_ as j}from"./uni-fab.cb1777f2.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.c3f4a5ee.js";const v=e.database();const y=w({data:()=>({collectionList:[v.collection("quanzi_like").where("user_id==$cloudEnv_uid").getTemp(),v.collection("quanzi_article").getTemp()],loadMore:{contentdown:"",contentrefresh:"",contentnomore:""}}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{a()}))},onReachBottom(){this.$refs.udb.loadMore()},methods:{handleItemClick(e){o({url:"/pages/detail/detail?id="+e})},fabClick(){o({url:"./add",events:{refreshData:()=>{this.$refs.udb.loadData({clear:!0})}}})}}},[["render",function(e,a,o,w,v,y){const D=s,$=p,z=k(_("uni-list-item"),b),M=k(_("uni-list"),h),x=k(_("uni-load-more"),g),F=k(_("unicloud-db"),C),T=k(_("uni-fab"),j);return t(),i(D,{class:"container"},{default:l((()=>[r(F,{ref:"udb",where:"user_id==$cloudEnv_uid",collection:v.collectionList,orderby:"publish_date desc",field:"article_id,publish_date,user_id,comment_ip"},{default:l((({data:e,pagination:a,loading:o,hasMore:s,error:_})=>[_?(t(),i(D,{key:0},{default:l((()=>[n(d(_.message),1)])),_:2},1024)):e?(t(),i(D,{key:1},{default:l((()=>[r(M,null,{default:l((()=>[(t(!0),u(m,null,c(e,((e,a)=>(t(),i(z,{key:a,showArrow:"",clickable:!0,onClick:a=>y.handleItemClick(e.article_id[0]._id)},{body:l((()=>[r($,null,{default:l((()=>[n(d(e.article_id[0].title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):f("",!0),r(x,{status:o?"loading":s?"more":"noMore"},null,8,["status"])])),_:1},8,["collection"]),r(T,{ref:"fab",horizontal:"right",vertical:"bottom","pop-menu":!1,onFabClick:y.fabClick},null,8,["onFabClick"])])),_:1})}]]);export{y as default};
